<!-- Last copy of products.html before completely changing the code structure -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

    <title>Products</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="assets/css/fontawesome.css">
    <link rel="stylesheet" href="assets/css/templatemo-sixteen.css">
    <link rel="stylesheet" href="assets/css/owl.css">

    <style>
        img {
            width: 100px;
        }
    </style>

</head>

<body>
    <!-- ***** Preloader Start ***** -->
    <div id="preloader">
        <div class="jumper">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <!-- ***** Preloader End ***** -->

    <!-- Header -->
    <header class="">
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <h2>UniCart</h2>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                    aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home
                                <span class="sr-only">(current)</span>
                            </a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="products.html">Products</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="compare.html">Compare</a>
                      </li>
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">About Us</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Page Content -->
    <div class="page-heading products-heading header-text">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="text-content">
                        <h2 style="color: rgb(0, 255, 85);">Jiji Collection</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Radio buttons for specifying search collections -->
    <div class="container">
        <h3>Choose a website:</h3>
        <input type="radio" name="website" id="all-products-compared-radio" value="all-products-compared" checked>
        <label for="all-products-compared-radio">All Products</label>
        <input type="radio" name="website" id="jiji-radio" value="jiji">
        <label for="jiji-radio">Jiji</label>
        <input type="radio" name="website" id="jumia-radio" value="jumia">
        <label for="jumia-radio">Jumia</label>
        
        <p style="color:black">You're currently on Jiji collection</p>

        <div class="container">
            <p style="color: black"> -> Click item IDs to view details about the item</p>
        </div>
    </div>

    <!-- Table within page -->
    <div class="container">
        <!-- Search Box -->
        <div class="container">
            <div class="mb-3">
                <input type="text" id="searchInput" class="form-control" placeholder="Search for a product">
            </div>
            <button class="btn btn-primary" onclick="searchProducts()">Search</button>
        </div>

        <table class="table table-bordered">
            <thead class="table-dark">
                <tr>
                    <th scope="col">Item_Id</th>
                    <th scope="col">Item Name</th>
                    <th scope="col">Price</th>
                    <th scope="col">Image</th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody id="table_body">
            </tbody>
        </table>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="inner-content">
                        <p>
                            Copyright &copy; 2023 Aztechs -
                            Design: <a rel="nofollow noopener" href="https://templatemo.com" target="_blank">Andrew & Nyanzi</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Additional Scripts -->
    <script src="assets/js/custom.js"></script>
    <script src="assets/js/owl.js"></script>
    <script src="assets/js/slick.js"></script>
    <script src="assets/js/isotope.js"></script>
    <script src="assets/js/accordions.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>

    <script src="assets/js/productfetch.js"></script>

    <script>
        var currentSearchTerm = ""; // Initialize the search term variable

        document.getElementById('jiji-radio').addEventListener('click', function () {
            const newSearchTerm = document.getElementById("searchInput").value.toLowerCase();
            window.location.href = `products.html?search=${encodeURIComponent(newSearchTerm)}`;
        });

        document.getElementById('jumia-radio').addEventListener('click', function () {
            const newSearchTerm = document.getElementById("searchInput").value.toLowerCase();
            window.location.href = `jumiaproducts.html?search=${encodeURIComponent(newSearchTerm)}`;
        });

        function searchProducts() {
            var searchQuery = document.getElementById("searchInput").value.toLowerCase();
            currentSearchTerm = searchQuery; // Store the search term in the variable


            // Make an HTTP GET request to the search API endpoint
            fetch(`https://boiling-fjord-00108-52329a44ed31.herokuapp.com/search?query=${encodeURIComponent(searchQuery)}`)
                .then((response) => {
                    if (response.ok) {
                        return response.json(); // Convert the response to an object
                    } else {
                        throw new Error("Error: " + response.status);
                    }
                })
                .then((responseData) => {
                    const objectData = responseData.collection1; // Access the desired collection

                    let tableData = "";
                    objectData.forEach((values) => {
                        // Convert the item name and ID to lowercase for case-insensitive search
                        const itemName = values["Item Name"].toLowerCase();
                        const itemId = values._id.toLowerCase();
                        if (itemName.includes(searchQuery) || itemId.includes(searchQuery)) {
                            tableData += `<tr>
                            <td><a href="item.html?id=${values._id}">${values._id}</a></td>
                            <td>${values["Item Name"]}</td> <!-- Access "Item Name" using square brackets notation -->
                            <td>${values.Price}</td>
                            <td><img src="${values.Image}" alt="${values["Item Name"]}"/></td>
                            <td><button onclick="addItemToCompare('${values._id}')">Add to Compare</button></td>
                            </tr>`;
                        }
                        
                    });

                    document.getElementById("table_body").innerHTML = tableData;
                })
                .catch((error) => {
                    console.log(error);
                });
        }

        function addItemToCompare(itemId) {
            // Check if the item ID already exists in localStorage
            const existingItems = JSON.parse(localStorage.getItem("compareItems")) || [];
            if (!existingItems.includes(itemId)) {
                existingItems.push(itemId);
                localStorage.setItem("compareItems", JSON.stringify(existingItems));
                alert("Item added to Compare");
            } else {
                alert("Item already added to Compare");
            }
        }
    </script>

    <!-- Collection page switching logic for websites -->
    <script>
        document.getElementById('jiji-radio').addEventListener('click', function () {
            window.location.href = 'products.html?search=' + encodeURIComponent(currentSearchTerm);
        });

        document.getElementById('jumia-radio').addEventListener('click', function () {
            window.location.href = 'jumiaproducts.html?search=' + encodeURIComponent(currentSearchTerm);
        });

        // Perform search when Enter key is pressed
        document.getElementById("searchInput").addEventListener("keydown", function (event) {
            if (event.key === "Enter" || event.key === "Return") {
                searchProducts();
            }
        });

    </script>

</body>

</html>




<!-- The second half. After other changes-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

    <title>Products</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="assets/css/fontawesome.css">
    <link rel="stylesheet" href="assets/css/templatemo-sixteen.css">
    <link rel="stylesheet" href="assets/css/owl.css">

    <style>
        img {
            width: 100px;
        }
    </style>

    <script>
        var currentSearchTerm = ""; // Initialize the search term variable

        // Initialize radio buttons and search term on page load
        window.addEventListener('load', function () {
            const radioAllProducts = document.getElementById('all-products-compared-radio');
            const radioJiji = document.getElementById('jiji-radio');
            const radioJumia = document.getElementById('jumia-radio');

            // Set event listeners for radio buttons
            radioAllProducts.addEventListener('click', handleRadioChange);
            radioJiji.addEventListener('click', handleRadioChange);
            radioJumia.addEventListener('click', handleRadioChange);

            // Set "All Products" radio button as default and trigger initial search
            radioAllProducts.checked = true;
            handleRadioChange();
        });

        // Function to handle radio button change
        function handleRadioChange() {
            const selectedRadio = document.querySelector('input[name="website"]:checked').value;
            const newSearchTerm = document.getElementById("searchInput").value.toLowerCase();

            if (selectedRadio === "all-products-compared") {
                // Handle "All Products" selection
                currentSearchTerm = newSearchTerm;
                searchProducts();
            } else if (selectedRadio === "jiji") {
                // Handle "Jiji" selection
                window.location.href = `jijiProducts.html?search=${encodeURIComponent(newSearchTerm)}`;
            } else if (selectedRadio === "jumia") {
                // Handle "Jumia" selection
                window.location.href = `jumiaproducts.html?search=${encodeURIComponent(newSearchTerm)}`;
            }
        }

        // Rest of your existing JavaScript code...
    </script>


</head>

<body>
    <!-- ***** Preloader Start ***** -->
    <div id="preloader">
        <div class="jumper">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <!-- ***** Preloader End ***** -->

    <!-- Header -->
    <header class="">
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <h2>UniCart</h2>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                    aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home
                                <span class="sr-only">(current)</span>
                            </a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="products.html">Products</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="compare.html">Compare</a>
                      </li>
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">About Us</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Page Content -->
    <div class="page-heading products-heading header-text">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="text-content">
                        <h2 style="color: rgb(64, 180, 226);">All Products Collection</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Radio buttons for specifying search collections -->
    <div class="container">
        <h3>Choose a website:</h3>
        <input type="radio" name="website" id="all-products-compared-radio" value="all-products-compared" checked>
        <label for="all-products-compared-radio">All Products</label>
        <input type="radio" name="website" id="jiji-radio" value="jiji">
        <label for="jiji-radio">Jiji</label>
        <input type="radio" name="website" id="jumia-radio" value="jumia">
        <label for="jumia-radio">Jumia</label>
    </div>

    <!-- Table within page -->
    <div class="container">
        <!-- Search Box -->
        <div class="container">
            <div class="mb-3">
                <input type="text" id="searchInput" class="form-control" placeholder="Search for a product">
            </div>
            <button class="btn btn-primary" onclick="searchProducts()">Search</button>
        </div>

        <table class="table table-bordered">
            <thead class="table-dark">
                <tr>
                    <th scope="col">Jiji</th>
                    <th scope="col">Jumia</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th scope="col">Brand</th>
                                    <th scope="col">Item Name</th>
                                    <th scope="col">Price</th>
                                    <th scope="col"></th>
                                </tr>
                            </thead>
                            <tbody id="jiji_table_body">
                                <!-- TODO: Populate Jiji Apple items here -->
                            </tbody>
                        </table>
                    </td>
                    <td>
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th scope="col">Brand</th>
                                    <th scope="col">Item Name</th>
                                    <th scope="col">Price</th>
                                    <th scope="col"></th>
                                </tr>
                            </thead>
                            <tbody id="jumia_table_body">
                                <!-- TODO: Populate Jumia Apple items here -->
                            </tbody>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td>
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th scope="col">Brand</th>
                                    <th scope="col">Item Name</th>
                                    <th scope="col">Price</th>
                                    <th scope="col"></th>
                                </tr>
                            </thead>
                            <tbody id="jiji_samsung_table_body">
                                <!-- TODO: Populate Jiji Samsung items here -->
                            </tbody>
                        </table>
                    </td>
                    <td>
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th scope="col">Brand</th>
                                    <th scope="col">Item Name</th>
                                    <th scope="col">Price</th>
                                    <th scope="col"></th>
                                </tr>
                            </thead>
                            <tbody id="jumia_samsung_table_body">
                                <!-- TODO: Populate Jumia Samsung items here -->
                            </tbody>
                        </table>
                    </td>
                </tr>
                <!-- TODO: Continue with other brands... -->
            </tbody>
        </table>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="inner-content">
                        <p>
                            Copyright &copy; 2023 Aztechs -
                            Design: <a rel="nofollow noopener" href="https://templatemo.com" target="_blank">Andrew & Nyanzi</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Additional Scripts -->
    <script src="assets/js/custom.js"></script>
    <script src="assets/js/owl.js"></script>
    <script src="assets/js/slick.js"></script>
    <script src="assets/js/isotope.js"></script>
    <script src="assets/js/accordions.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>

    <script src="assets/js/productfetch.js"></script>

    <script>
        var currentSearchTerm = ""; // Initialize the search term variable
        var allProductsData = []; // Store all products data initially

        document.getElementById('jiji-radio').addEventListener('click', function () {
            const newSearchTerm = document.getElementById("searchInput").value.toLowerCase();
            window.location.href = `jijiProducts.html?search=${encodeURIComponent(newSearchTerm)}`;
        });


        document.getElementById('jumia-radio').addEventListener('click', function () {
            const newSearchTerm = document.getElementById("searchInput").value.toLowerCase();
            window.location.href = `jumiaproducts.html?search=${encodeURIComponent(newSearchTerm)}`;
        });

            // Function to fetch all products and populate the table
        function fetchAllProducts() {
            fetch(`https://boiling-fjord-00108-52329a44ed31.herokuapp.com/all`)
                .then((response) => {
                    if (response.ok) {
                        return response.json();
                    } else {
                        throw new Error("Error: " + response.status);
                    }
                })
                .then((responseData) => {
                    allProductsData = responseData.collection1; // Store all products data
                    updateTable(allProductsData);
                })
                .catch((error) => {
                    console.log(error);
                });
        }

        // Function to update the table with data
        function updateTable(data) {
            let tableData = "";
            data.forEach((values) => {
                tableData += `<tr>
                    <td><a href="item.html?id=${values._id}">${values._id}</a></td>
                    <td>${values["Item Name"]}</td>
                    <td>${values.Price}</td>
                    <td><img src="${values.Image}" alt="${values["Item Name"]}"/></td>
                    <td><button onclick="addItemToCompare('${values._id}')">Add to Compare</button></td>
                    </tr>`;
            });

            document.getElementById("table_body").innerHTML = tableData;
        }

        // Load all products and populate the table on page load
        //window.addEventListener('load', function () {
        //    fetchAllProducts();
        //});

        function searchProducts() {
            var searchQuery = document.getElementById("searchInput").value.toLowerCase();
            currentSearchTerm = searchQuery; // Store the search term in the variable


            // Make an HTTP GET request to the search API endpoint
            fetch(`https://boiling-fjord-00108-52329a44ed31.herokuapp.com/search?query=${encodeURIComponent(searchQuery)}`)
                .then((response) => {
                    if (response.ok) {
                        return response.json(); // Convert the response to an object
                    } else {
                        throw new Error("Error: " + response.status);
                    }
                })
                .then((responseData) => {
                    const objectData = responseData.collection1; // Access the desired collection

                    let tableData = "";
                    objectData.forEach((values) => {
                        // Convert the item name and ID to lowercase for case-insensitive search
                        const itemName = values["Item Name"].toLowerCase();
                        const itemId = values._id.toLowerCase();
                        if (itemName.includes(searchQuery) || itemId.includes(searchQuery)) {
                            tableData += `<tr>
                            <td><a href="item.html?id=${values._id}">${values._id}</a></td>
                            <td>${values["Item Name"]}</td> <!-- Access "Item Name" using square brackets notation -->
                            <td>${values.Price}</td>
                            <td><img src="${values.Image}" alt="${values["Item Name"]}"/></td>
                            <td><button onclick="addItemToCompare('${values._id}')">Add to Compare</button></td>
                            </tr>`;
                        }
                        
                    });

                    document.getElementById("table_body").innerHTML = tableData;
                })
                .catch((error) => {
                    console.log(error);
                });
        }

            // Fetch and populate the table
        function fetchAndPopulateTable() {
            fetch(`https://boiling-fjord-00108-52329a44ed31.herokuapp.com/grouped_items/collection1`)
                .then((response) => response.json())
                .then((data) => {
                    populateTable(data.collection1);
                })
                .catch((error) => {
                    console.error(error);
                });

            fetch(`https://boiling-fjord-00108-52329a44ed31.herokuapp.com/grouped_items/collection2`)
                .then((response) => response.json())
                .then((data) => {
                    populateTable(data.collection2);
                })
                .catch((error) => {
                    console.error(error);
                });
        }

        // Populate the table with data
        function populateTable(data) {
            let tableData = "";

            // Sort data alphabetically by item name
            data.sort((a, b) => a.name.localeCompare(b.name));

            // Loop through the sorted data and generate table rows
            data.forEach((item) => {
                tableData += `<tr>
                    <td>${item.brand}</td>
                    <td>${item.name}</td>
                    <td>${item.price}</td>
                    <td><button onclick="addItemToCompare('${item._id}')">Add to Compare</button></td>
                </tr>`;
            });

            document.getElementById("table_body").innerHTML = tableData;
        }


            // Function to handle search input keydown event
        function handleSearchInput(event) {
            if (event.key === "Enter") {
                searchProducts();
            }
        }

            // Load and populate the table on page load
        window.addEventListener('load', function () {
            fetchAndPopulateTable();
        });


        function addItemToCompare(itemId) {
            // Check if the item ID already exists in localStorage
            const existingItems = JSON.parse(localStorage.getItem("compareItems")) || [];
            if (!existingItems.includes(itemId)) {
                existingItems.push(itemId);
                localStorage.setItem("compareItems", JSON.stringify(existingItems));
                alert("Item added to Compare");
            } else {
                alert("Item already added to Compare");
            }
        }
    </script>


</body>

</html>



<!-- Version 3 -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

    <title>Products</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="assets/css/fontawesome.css">
    <link rel="stylesheet" href="assets/css/templatemo-sixteen.css">
    <link rel="stylesheet" href="assets/css/owl.css">

    <style>
        img {
            width: 100px;
        }
    </style>

</head>

<body>
    <!-- ***** Preloader Start ***** -->
    <div id="preloader">
        <div class="jumper">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <!-- ***** Preloader End ***** -->

    <!-- Header -->
    <header class="">
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <h2>UniCart</h2>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                    aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home
                                <span class="sr-only">(current)</span>
                            </a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="products.html">Products</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="compare.html">Compare</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">About Us</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Page Content -->
    <div class="page-heading products-heading header-text">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="text-content">
                        <h2 style="color: rgb(64, 180, 226);">All Products Collection</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Radio buttons for specifying search collections -->
    <div class="container">
        <h3>Choose a website:</h3>
        <input type="radio" name="website" id="all-products-compared-radio" value="all-products-compared" checked>
        <label for="all-products-compared-radio">All Products</label>
        <input type="radio" name="website" id="jiji-radio" value="jiji">
        <label for="jiji-radio">Jiji</label>
        <input type="radio" name="website" id="jumia-radio" value="jumia">
        <label for="jumia-radio">Jumia</label>
    </div>

    <!-- Table within page -->
    <div class="container">
        <table class="table table-bordered">
            <thead class="table-dark">
                <tr>
                    <th scope="col">Jiji</th>
                    <th scope="col">Jumia</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th scope="col">Brand</th>
                                    <th scope="col">Item Name</th>
                                    <th scope="col">Price</th>
                                    <th scope="col"></th>
                                </tr>
                            </thead>
                            <tbody id="jiji_table_body">
                                <!-- Jiji items will be populated here -->
                                <script>
                                    fetch(`https://boiling-fjord-00108-52329a44ed31.herokuapp.com/grouped_items/collection1`)
                                        .then((response) => response.json())
                                        .then((data) => {
                                            populateTable(data.collection1, "jiji");
                                        })
                                        .catch((error) => {
                                            console.error(error);
                                        });
                                </script>
                            </tbody>
                        </table>
                    </td>
                    <td>
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th scope="col">Brand</th>
                                    <th scope="col">Item Name</th>
                                    <th scope="col">Price</th>
                                    <th scope="col"></th>
                                </tr>
                            </thead>
                            <tbody id="jumia_table_body">
                                <!-- Jumia items will be populated here -->
                            </tbody>
                        </table>
                    </td>
                </tr>
                <!-- Similar structure for other brands... -->
            </tbody>
        </table>
    </div>

    <!-- Pagination controls -->
    <div class="text-center mt-3">
        <button id="prevPageBtn" class="btn btn-primary">Previous Page</button>
        <button id="nextPageBtn" class="btn btn-primary">Next Page</button>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="inner-content">
                        <p>
                            Copyright &copy; 2023 Aztechs -
                            Design: <a rel="nofollow noopener" href="https://templatemo.com" target="_blank">Andrew & Nyanzi</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Additional Scripts -->
    <script src="assets/js/custom.js"></script>
    <script src="assets/js/owl.js"></script>
    <script src="assets/js/slick.js"></script>
    <script src="assets/js/isotope.js"></script>
    <script src="assets/js/accordions.js"></script>

    <script src="assets/js/productfetch.js"></script>

    <!-- Script for populating Jiji items -->
    <script>
        // Populate the "Jiji" table
        function populateJijiTable(data) {
            const jijiTableBody = document.getElementById("jiji_table_body");

            // Clear previous data
            jijiTableBody.innerHTML = "";

            // Sort data alphabetically by item name
            const brands = Object.keys(data);
            brands.sort(); // Sort brands alphabetically
            brands.forEach((brand) => {
                const items = data[brand];
                items.sort((a, b) => a.name.localeCompare(b.name)); // Sort items alphabetically within brands
                items.forEach((item) => {
                    jijiTableBody.innerHTML += `
                        <tr>
                            <td>${brand}</td>
                            <td>${item.name}</td>
                            <td>${item.price}</td>
                            <td><button onclick="addItemToCompare('${item._id}')">Add to Compare</button></td>
                        </tr>`;
                });
            });
        }

        // Populate the "Jumia" table
        function populateJumiaTable(data) {
            const jumiaTableBody = document.getElementById("jumia_table_body");

            // Clear previous data
            jumiaTableBody.innerHTML = "";

            // Sort data alphabetically by item name
            const categories = Object.keys(data);
            categories.forEach((category) => {
                const items = data[category];
                items.forEach((item) => {
                    jumiaTableBody.innerHTML += `
                        <tr>
                            <td>${category}</td>
                            <td>${item.name}</td>
                            <td>${item.price}</td>
                            <td><button onclick="addItemToCompare('${item._id}')">Add to Compare</button></td>
                        </tr>`;
                });
            });
        }

        // Load and populate the "Jumia" table on page load
        window.addEventListener('load', function () {
            fetch("https://boiling-fjord-00108-52329a44ed31.herokuapp.com/grouped_items/collection2")
                .then((response) => response.json())
                .then((data) => {
                    populateJumiaTable(data);
                })
                .catch((error) => {
                    console.error(error);
                });
        });

        // Load and populate the "Jiji" table on page load
        window.addEventListener('load', function () {
            fetch("https://boiling-fjord-00108-52329a44ed31.herokuapp.com/grouped_items/collection1")
                .then((response) => response.json())
                .then((data) => {
                    populateJijiTable(data);
                })
                .catch((error) => {
                    console.error(error);
                });
        });
    </script>

    <!-- Setup pagination event listeners -->
    <script>
        const itemsPerPage = 20; // Set to display 20 items per page
        let currentPage = 1;
        let jumiaData; // Store Jumia data for pagination

        function updatePaginationControls(totalItems) {
            const totalPages = Math.ceil(totalItems / itemsPerPage);

            const prevPageBtn = document.getElementById("prevPageBtn");
            const nextPageBtn = document.getElementById("nextPageBtn");

            prevPageBtn.disabled = currentPage === 1;
            nextPageBtn.disabled = currentPage === totalPages;

            const paginationInfo = document.getElementById("paginationInfo");
            paginationInfo.textContent = `Page ${currentPage} of ${totalPages}`;
        }

        function populateTable(data, website) {
            const tableBody = document.getElementById(`${website}_table_body`);
            tableBody.innerHTML = ""; // Clear previous data

            const items = data[website];
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = Math.min(startIndex + itemsPerPage, items.length);

            for (let i = startIndex; i < endIndex; i++) {
                const item = items[i];
                tableBody.innerHTML += `
                    <tr>
                        <td>${item.name}</td>
                        <td>${item.price}</td>
                    </tr>`;
            }
        }

        function fetchAndPopulateTables() {
            fetch("https://boiling-fjord-00108-52329a44ed31.herokuapp.com/grouped_items/collection2")
                .then((response) => response.json())
                .then((data) => {
                    jumiaData = data; // Store Jumia data for pagination
                    populateTable(data, "jumia");
                    updatePaginationControls(data.jumia.length);
                })
                .catch((error) => {
                    console.error(error);
                });

            // Fetch Jiji data and populate table
            fetch("https://boiling-fjord-00108-52329a44ed31.herokuapp.com/grouped_items/collection1")
                .then((response) => response.json())
                .then((data) => {
                    populateTable(data, "jiji");
                })
                .catch((error) => {
                    console.error(error);
                });
        }

        // Pagination event listeners
        const prevPageBtn = document.getElementById("prevPageBtn");
        const nextPageBtn = document.getElementById("nextPageBtn");

        prevPageBtn.addEventListener("click", () => {
            if (currentPage > 1) {
                currentPage--;
                populateTable(jumiaData, "jumia");
                updatePaginationControls(jumiaData.jumia.length);
            }
        });

        nextPageBtn.addEventListener("click", () => {
            // Assuming data has been fetched and is available
            const totalItems = jumiaData.jumia.length; // Use Jumia data to determine total items
            const totalPages = Math.ceil(totalItems / itemsPerPage);

            if (currentPage < totalPages) {
                currentPage++;
                populateTable(jumiaData, "jumia");
                updatePaginationControls(jumiaData.jumia.length);
            }
        });

        // Fetch and populate tables on initial page load
        fetchAndPopulateTables();
    </script>


    <script src="assets/js/productfetch.js"></script>
</body>

</html>





<!-- Almost there! v3-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

    <title>Products</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="assets/css/fontawesome.css">
    <link rel="stylesheet" href="assets/css/templatemo-sixteen.css">
    <link rel="stylesheet" href="assets/css/owl.css">

    <style>
        img {
            width: 100px;
        }
    </style>

</head>

<body>
    <!-- ***** Preloader Start ***** -->
    <div id="preloader">
        <div class="jumper">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <!-- ***** Preloader End ***** -->

    <!-- Header -->
    <header class="">
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <h2>UniCart</h2>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                    aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home
                                <span class="sr-only">(current)</span>
                            </a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="products.html">Products</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="compare.html">Compare</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">About Us</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Page Content -->
    <div class="page-heading products-heading header-text">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="text-content">
                        <h2 style="color: rgb(64, 180, 226);">All Products Collection</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Radio buttons for specifying search collections -->
    <div class="container">
        <h3>Choose a website:</h3>
        <input type="radio" name="website" id="all-products-compared-radio" value="all-products-compared" checked>
        <label for="all-products-compared-radio">All Products</label>
        <input type="radio" name="website" id="jiji-radio" value="jiji">
        <label for="jiji-radio">Jiji</label>
        <input type="radio" name="website" id="jumia-radio" value="jumia">
        <label for="jumia-radio">Jumia</label>
    </div>

    <!-- Table within page -->
    <div class="container">
        <table class="table table-bordered">
            <thead class="table-dark">
                <tr>
                    <th scope="col">Jiji</th>
                    <th scope="col">Jumia</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th scope="col">Brand</th>
                                    <th scope="col">Item Name</th>
                                    <th scope="col">Price</th>
                                </tr>
                            </thead>
                            <tbody id="jiji_table_body">
                                <!-- Jiji items will be populated here -->
                            </tbody>
                        </table>
                        <div id="loadMoreRow" class="text-center mt-3">
                            <button id="loadMoreBtn" class="btn btn-primary">Load More</button>
                        </div>
                    </td>
                    <td>
                        <!-- ... (similar structure for Jumia) ... -->
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th scope="col">Brand</th>
                                    <th scope="col">Item Name</th>
                                    <th scope="col">Price</th>
                                    <th scope="col"></th>
                                </tr>
                            </thead>
                            <tbody id="jumia_table_body">
                                <!-- Jumia items will be populated here -->
                            </tbody>
                        </table>
                    </td>
                </tr>
                <!-- Similar structure for other brands... -->
            </tbody>
        </table>


    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="inner-content">
                        <p>
                            Copyright &copy; 2023 Aztechs -
                            Design: <a rel="nofollow noopener" href="https://templatemo.com" target="_blank">Andrew & Nyanzi</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Additional Scripts -->
    <script src="assets/js/custom.js"></script>
    <script src="assets/js/owl.js"></script>
    <script src="assets/js/slick.js"></script>
    <script src="assets/js/isotope.js"></script>
    <script src="assets/js/accordions.js"></script>

    

    <!-- Script for populating Jiji items -->
    <script>

        // Variables for pagination
        let currentPage = 0; // Current page index
        const itemsPerPage = 10; // Items per page
        let isLoading = false; // Flag to prevent multiple loading calls

        // Load more items function
        function loadMoreItems() {
            console.log("Load More button clicked");

            if (isLoading) return;

            isLoading = true;

            // Fetch data from the API
            fetch(`https://boiling-fjord-00108-52329a44ed31.herokuapp.com/grouped_items/collection1?page=${currentPage}&limit=${itemsPerPage}`)
                .then((response) => response.json())
                .then((data) => {
                    console.log("API response: ", data);

                    const brandData = data; // The API response is an object with brand keys and item arrays as values

                    const brands = Object.keys(brandData);
                    const totalItems = brands.reduce((sum, brand) => sum + brandData[brand].length, 0);

                    const startIndex = currentPage * itemsPerPage;
                    const endIndex = Math.min(startIndex + itemsPerPage, totalItems);

                    // Populate the table with items from the brand data
                    populateJijiTable(brandData, startIndex, endIndex);

                    console.log("Current Page:", currentPage);
                    console.log("Items Per Page:", itemsPerPage);
                    console.log("Total Items:", totalItems);
                    console.log("Start Index:", startIndex);
                    console.log("End Index:", endIndex);

                    // Update page index
                    currentPage++;

                    isLoading = false;
                })
                .catch((error) => {
                    console.error(error);
                    isLoading = false;
                });
        }

        // Populate the "Jiji" table
        function populateJijiTable(brandData, startIndex, endIndex) {
            const jijiTableBody = document.getElementById("jiji_table_body");

            const brands = Object.keys(brandData);
            brands.sort(); // Sort brands alphabetically

            let count = 0;
            let newRow = '';

            brands.forEach((brand) => {
                brandData[brand].forEach((item) => {
                    if (count >= startIndex && count < endIndex) {
                        jijiTableBody.innerHTML += `
                            <tr>
                                <td>${brand}</td>
                                <td>${item.name}</td>
                                <td>${item.price}</td>
                                <td><button onclick="addItemToCompare('${item._id}')">Add to Compare</button></td>
                            </tr>`;
                        jijiTableBody.insertAdjacentHTML('beforeend', newRow)    
                    }
                    count++;
                });
            });
        }


        // Add a click event listener to the Load More button
        document.getElementById("loadMoreBtn").addEventListener("click", loadMoreItems);

        // Initial load of data
        loadMoreItems();

    </script>


    <!-- <script src="assets/js/productfetch.js"></script> -->
</body>

</html>
